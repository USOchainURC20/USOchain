@echo off
echo ✅ Starting Geth node...

:: Launch the Geth node in a new terminal window
start cmd /k "geth --datadir .\data --networkid 571 ^
 --http --http.addr 127.0.0.1 --http.port 8545 ^
 --http.api eth,net,web3,personal ^
 --mine --miner.threads=1 --miner.etherbase=0xdd6342cD45CE437382C00523cc6F22968bdd21b8 ^
 --allow-insecure-unlock --nodiscover ^
 --http.corsdomain=* --http.vhosts=* --verbosity 3"

:: Wait for Geth to fully start (allow extra time)
echo ⏳ Waiting 20 seconds for Geth to fully start...
timeout /t 20 /nobreak >nul

echo 🚀 Deploying using Hardhat...
npx hardhat run scripts/deploy.js --network usochain

pause